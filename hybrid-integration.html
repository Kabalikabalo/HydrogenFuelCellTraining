<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Integration - Hydrogen Fuel Cell Propulsion Course</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 67%;
            transition: width 0.5s;
        }
        
        .nav {
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 99;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .nav-btn {
            padding: 0.7rem 1.2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        
        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            color: #764ba2;
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
        }
        
        h4 {
            color: #333;
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem;
        }
        
        p, li { margin-bottom: 0.8rem; }
        
        .info-box {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            border-left: 5px solid #667eea;
        }
        
        .key-point {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            border-left: 5px solid #f5576c;
        }
        
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        .canvas-box {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            text-align: center;
        }
        
        canvas {
            display: block;
            margin: 1rem auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 100%;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            margin: 0.3rem;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 1.5rem 0;
        }
        
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        .hamburger {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1000;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 8px;
            padding: 0.7rem;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        
        .hamburger span {
            display: block;
            width: 25px;
            height: 3px;
            background: white;
            margin: 5px 0;
            transition: 0.3s;
            border-radius: 2px;
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 1.3rem; }
            .header p { font-size: 0.85rem; }
            .header { padding: 1rem; }
            .content { padding: 1rem; }
            canvas { width: 100% !important; height: auto !important; }
            
            .hamburger { display: block; }
            
            .nav {
                position: fixed;
                top: 0;
                left: -100%;
                height: 100vh;
                width: 280px;
                flex-direction: column;
                background: rgba(255, 255, 255, 0.98);
                padding: 5rem 1.5rem 1.5rem;
                box-shadow: 4px 0 10px rgba(0,0,0,0.1);
                transition: left 0.3s ease;
                overflow-y: auto;
            }
            
            .nav.active {
                left: 0;
            }
            
            .nav-btn {
                width: 100%;
                text-align: center;
                margin: 0.3rem 0;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 { font-size: 1.1rem; }
            .header p { font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <button class="hamburger" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="header">
        <h1>âš¡ Hydrogen Fuel Cell Propulsion Course</h1>
        <p>Complete Guide for Low-Speed Vehicles & Golf Carts</p>
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </div>

    <div class="nav" id="nav">
        <a href="index.html" class="nav-btn">Introduction</a>
        <a href="fundamentals.html" class="nav-btn">Fundamentals</a>
        <a href="pem-technology.html" class="nav-btn">PEM Technology</a>
        <a href="system-components.html" class="nav-btn">System Components</a>
        <a href="golf-cart-application.html" class="nav-btn">Golf Cart App</a>
        <a href="hybrid-integration.html" class="nav-btn active">Hybrid Integration</a>
        <a href="power-management.html" class="nav-btn">Power Management</a>
        <a href="safety-storage.html" class="nav-btn">Safety & Storage</a>
        <a href="advanced-topics.html" class="nav-btn">Advanced Topics</a>
    </div>

    <div class="content">
        <h2>ðŸ”Œ Module 5: Hybrid System Integration</h2>

            <h3>Topology Comparison</h3>
            <div class="table-wrapper">
            <table>
                <tr>
                    <th>Topology</th>
                    <th>Efficiency</th>
                    <th>Cost</th>
                    <th>Best For</th>
                </tr>
                <tr>
                    <td>Direct Parallel (Passive)</td>
                    <td>75-82%</td>
                    <td>Lowest</td>
                    <td>DIY, Education</td>
                </tr>
                <tr>
                    <td>Semi-Active (FC Conv.)</td>
                    <td>82-88%</td>
                    <td>Moderate (+$400-600)</td>
                    <td><strong>Commercial Golf Carts</strong></td>
                </tr>
                <tr>
                    <td>Fully Active (Both Conv.)</td>
                    <td>85-92%</td>
                    <td>Highest (+$1000-1500)</td>
                    <td>Premium Applications</td>
                </tr>
            </table>
            </div>

            <h3>Power Flow Visualization</h3>
            <div class="canvas-box">
                <canvas id="topoCanvas" width="700" height="300"></canvas>
                <div>
                    <button class="btn" onclick="drawTopology('cruise')">Cruise</button>
                    <button class="btn" onclick="drawTopology('acceleration')">Acceleration</button>
                    <button class="btn" onclick="drawTopology('braking')">Braking</button>
                </div>
                <p style="margin-top: 1rem;"><strong>Figure 5.1:</strong> Interactive power flow for different scenarios</p>
            </div>

            <h3>DC-DC Converter Specifications</h3>
            <div class="info-box">
                <h4>Unidirectional Boost Converter (for FC):</h4>
                <p><strong>Input:</strong> 25-45V DC (FC voltage range)</p>
                <p><strong>Output:</strong> 48V DC regulated (Â±2V)</p>
                <p><strong>Power:</strong> 3 kW continuous, 3.5 kW peak</p>
                <p><strong>Efficiency:</strong> 93-96% at rated power</p>
                <p><strong>Switching Frequency:</strong> 20-50 kHz</p>
                <p><strong>Critical:</strong> <5% current ripple (protects FC from stress)</p>
            </div>

            <div class="key-point">
                <h3>Recommended: Semi-Active Topology</h3>
                <p><strong>Why:</strong> Best balance of cost, performance, and reliability</p>
                <p><strong>Efficiency Gain:</strong> 7-10 percentage points vs passive</p>
                <p><strong>ROI:</strong> 2-3 year payback in commercial operation</p>
                <p><strong>Adoption:</strong> Industry standard for commercial FC golf carts</p>
            </div>
    </div>

    <script>
        // Update progress bar (67% for sixth module - 6/9)
        document.getElementById('progressBar').style.width = '67%';

        function toggleMenu() {
            const nav = document.getElementById('nav');
            const hamburger = document.querySelector('.hamburger');
            nav.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        // Canvas: Topology
        function drawTopology(mode) {
            const canvas = document.getElementById('topoCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, w, h);
            
            const modes = {
                cruise: { fc: 1.2, batt: 0, motor: 1.2, title: 'Cruise Mode (1.2 kW)' },
                acceleration: { fc: 2.5, batt: 2.0, motor: 4.5, title: 'Acceleration (4.5 kW)' },
                braking: { fc: 0, batt: -2.0, motor: -2.0, title: 'Regenerative Braking (-2 kW)' }
            };
            
            const data = modes[mode];
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(data.title, w/2, 30);
            
            ctx.fillStyle = '#f3e5f5';
            ctx.strokeStyle = '#7b1fa2';
            ctx.lineWidth = 3;
            ctx.fillRect(80, 100, 120, 60);
            ctx.strokeRect(80, 100, 120, 60);
            ctx.fillStyle = '#7b1fa2';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Fuel Cell', 140, 125);
            ctx.font = '12px Arial';
            ctx.fillText(data.fc.toFixed(1) + ' kW', 140, 145);
            
            ctx.fillStyle = '#ffebee';
            ctx.strokeStyle = '#c62828';
            ctx.fillRect(80, 200, 120, 60);
            ctx.strokeRect(80, 200, 120, 60);
            ctx.fillStyle = '#c62828';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Battery', 140, 225);
            ctx.font = '12px Arial';
            const battSign = data.batt >= 0 ? '+' : '';
            ctx.fillText(battSign + data.batt.toFixed(1) + ' kW', 140, 245);
            
            ctx.strokeStyle = '#ff9800';
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.moveTo(280, 130);
            ctx.lineTo(280, 230);
            ctx.stroke();
            ctx.fillStyle = '#ff9800';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('DC Bus', 280, 100);
            ctx.font = '12px Arial';
            ctx.fillText('48V', 280, 115);
            
            ctx.fillStyle = '#e3f2fd';
            ctx.strokeStyle = '#1565c0';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(550, 180, 50, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = '#1565c0';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Motor', 550, 175);
            ctx.font = '12px Arial';
            ctx.fillText(Math.abs(data.motor).toFixed(1) + ' kW', 550, 195);
            
            if (data.fc > 0) {
                ctx.strokeStyle = '#7b1fa2';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(200, 130);
                ctx.lineTo(260, 130);
                ctx.stroke();
                ctx.fillStyle = '#7b1fa2';
                ctx.beginPath();
                ctx.moveTo(260, 130);
                ctx.lineTo(250, 125);
                ctx.lineTo(250, 135);
                ctx.fill();
            }
            
            if (data.batt > 0) {
                ctx.strokeStyle = '#c62828';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(200, 230);
                ctx.lineTo(260, 230);
                ctx.stroke();
                ctx.fillStyle = '#c62828';
                ctx.beginPath();
                ctx.moveTo(260, 230);
                ctx.lineTo(250, 225);
                ctx.lineTo(250, 235);
                ctx.fill();
            } else if (data.batt < 0) {
                ctx.strokeStyle = '#4caf50';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(260, 230);
                ctx.lineTo(200, 230);
                ctx.stroke();
                ctx.fillStyle = '#4caf50';
                ctx.beginPath();
                ctx.moveTo(200, 230);
                ctx.lineTo(210, 225);
                ctx.lineTo(210, 235);
                ctx.fill();
            }
            
            if (data.motor > 0) {
                ctx.strokeStyle = '#ff9800';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(300, 180);
                ctx.lineTo(500, 180);
                ctx.stroke();
                ctx.fillStyle = '#ff9800';
                ctx.beginPath();
                ctx.moveTo(500, 180);
                ctx.lineTo(490, 175);
                ctx.lineTo(490, 185);
                ctx.fill();
            }
        }

        // Auto-draw canvas on load
        window.addEventListener('load', function() {
            setTimeout(() => {
                drawTopology('cruise');
            }, 100);
        });
    </script>
</body>
</html>
