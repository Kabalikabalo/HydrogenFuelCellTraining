<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydrogen Fuel Cell Propulsion Course</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 11%;
            transition: width 0.5s;
        }
        
        .nav {
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            position: sticky;
            top: 150px;
            z-index: 99;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .nav-btn {
            padding: 0.7rem 1.2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .module {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeIn 0.5s;
        }
        
        .module.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            color: #764ba2;
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
        }
        
        h4 {
            color: #333;
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem;
        }
        
        p, li { margin-bottom: 0.8rem; }
        
        .info-box {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            border-left: 5px solid #667eea;
        }
        
        .key-point {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            border-left: 5px solid #f5576c;
        }
        
        .canvas-box {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            text-align: center;
        }
        
        canvas {
            display: block;
            margin: 1rem auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 100%;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            margin: 0.3rem;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 1.8rem; }
            .module { padding: 1.5rem; }
            .nav { top: 120px; }
            canvas { width: 100% !important; height: auto !important; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚ö° Hydrogen Fuel Cell Propulsion Course</h1>
        <p>Complete Guide for Low-Speed Vehicles & Golf Carts</p>
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </div>

    <div class="nav">
        <button class="nav-btn active" onclick="showModule(0)">Introduction</button>
        <button class="nav-btn" onclick="showModule(1)">Fundamentals</button>
        <button class="nav-btn" onclick="showModule(2)">PEM Technology</button>
        <button class="nav-btn" onclick="showModule(3)">System Components</button>
        <button class="nav-btn" onclick="showModule(4)">Golf Cart App</button>
        <button class="nav-btn" onclick="showModule(5)">Hybrid Integration</button>
        <button class="nav-btn" onclick="showModule(6)">Power Management</button>
        <button class="nav-btn" onclick="showModule(7)">Safety & Storage</button>
        <button class="nav-btn" onclick="showModule(8)">Advanced Topics</button>
    </div>

    <div class="container">
        <!-- Module 0: Introduction -->
        <div class="module active">
            <h2>üöÄ Module 0: Introduction</h2>
            
            <div class="info-box">
                <h3>Welcome to Hydrogen Fuel Cell Propulsion!</h3>
                <p>This comprehensive course covers hydrogen fuel cell systems for low-speed vehicles, from basic principles to advanced integration techniques.</p>
            </div>

            <h3>Course Modules</h3>
            <ol>
                <li><strong>Fundamentals:</strong> Electrochemistry and fuel cell basics</li>
                <li><strong>PEM Technology:</strong> Membrane electrode assembly details</li>
                <li><strong>System Components:</strong> Balance of plant architecture</li>
                <li><strong>Golf Cart Application:</strong> Practical sizing and integration</li>
                <li><strong>Hybrid Integration:</strong> FC-battery topologies (series/parallel)</li>
                <li><strong>Power Management:</strong> Control strategies and optimization</li>
                <li><strong>Safety & Storage:</strong> Hydrogen handling and regulations</li>
                <li><strong>Advanced Topics:</strong> Future technologies and trends</li>
            </ol>

            <div class="key-point">
                <h3>Why Hydrogen for Golf Carts?</h3>
                <p><strong>‚úì Zero Emissions:</strong> Only water vapor produced</p>
                <p><strong>‚úì Fast Refueling:</strong> 2-3 minutes vs 2-8 hours charging</p>
                <p><strong>‚úì Extended Range:</strong> 80-120 km per kg H‚ÇÇ</p>
                <p><strong>‚úì Weight Savings:</strong> 300-400 kg lighter than lead-acid</p>
                <p><strong>‚úì Indoor Safe:</strong> No emissions during operation</p>
            </div>

            <h3>Real-World Example: Mike Strizki's Golf Cart</h3>
            <div class="info-box">
                <p><cite index="5-1">Mike Strizki converted a GEM golf cart at Mohegan Sun resort using a 3 kW fuel cell. The hydrogen fuel comes in a four-pound canister under 2,500 psi, which can be easily purchased from commercial specialty gas providers. The refueling process takes only two minutes.</cite></p>
                <p style="margin-top: 1rem;"><strong>System Cost:</strong> ~$3,000-5,000 for conversion</p>
                <p><strong>Benefits:</strong> Non-polluting for indoor use, extended range, fast refueling</p>
            </div>

            <h3>Typical Fuel Cell Stack for Golf Carts</h3>
            <div class="info-box">
                <p><strong>Compact PEM Fuel Cell Stack (1.2-3 kW):</strong></p>
                <ul>
                    <li><strong>Physical Size:</strong> Approximately 30√ó20√ó15 cm (comparable to a car battery)</li>
                    <li><strong>Weight:</strong> 8-15 kg (stack only)</li>
                    <li><strong>Construction:</strong> Multiple cells stacked in series (50-80 cells typical for 48V)</li>
                    <li><strong>Cooling:</strong> Liquid cooled with integrated coolant channels</li>
                    <li><strong>Connections:</strong> H‚ÇÇ inlet, air inlet, coolant ports, electrical terminals</li>
                    <li><strong>Appearance:</strong> Metallic rectangular box with end plates, manifolds, and cooling fins</li>
                </ul>
                <p style="margin-top: 1rem;"><cite index="6-1">Oakland University students used a 1.2 kW fuel cell system from Heliocentris Energy Systems Inc. for their hydrogen golf cart conversion. The system provides power to the vehicle's motor with a battery supplying additional power during high demand periods.</cite></p>
                <p style="margin-top: 1rem;"><em>Note: Modern fuel cell stacks are compact enough to fit in the space of a traditional golf cart battery compartment, making retrofits feasible.</em></p>
            </div>

            <h3>Real-World Fuel Cell Stack for Golf Carts</h3>
            <div class="canvas-box">
                <svg width="700" height="500" viewBox="0 0 700 500" style="max-width: 100%; height: auto;">
                    <!-- Title -->
                    <text x="350" y="25" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Compact PEM Fuel Cell Stack (1.2-3 kW)</text>
                    <text x="350" y="45" text-anchor="middle" font-size="12" fill="#666">Typical design for golf cart and low-speed vehicle applications</text>
                    
                    <!-- Main Stack Body -->
                    <defs>
                        <linearGradient id="metalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#e0e0e0;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#bdbdbd;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#9e9e9e;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="endPlateGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#455a64;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#263238;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    
                    <!-- Stack cells (layered effect) -->
                    <g>
                        <!-- Individual cell layers -->
                        <rect x="200" y="100" width="300" height="8" fill="#757575" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="110" width="300" height="8" fill="#9e9e9e" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="120" width="300" height="8" fill="#757575" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="130" width="300" height="8" fill="#9e9e9e" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="140" width="300" height="8" fill="#757575" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="150" width="300" height="8" fill="#9e9e9e" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="160" width="300" height="8" fill="#757575" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="170" width="300" height="8" fill="#9e9e9e" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="180" width="300" height="8" fill="#757575" stroke="#424242" stroke-width="1"/>
                        <rect x="200" y="190" width="300" height="8" fill="#9e9e9e" stroke="#424242" stroke-width="1"/>
                        
                        <!-- More cells -->
                        <rect x="200" y="200" width="300" height="80" fill="url(#metalGrad)" stroke="#424242" stroke-width="1"/>
                        
                        <!-- Label for stack -->
                        <text x="350" y="245" text-anchor="middle" font-size="14" font-weight="bold" fill="#fff">60-72 CELLS</text>
                        <text x="350" y="260" text-anchor="middle" font-size="11" fill="#fff">Stacked in Series</text>
                    </g>
                    
                    <!-- End Plates -->
                    <rect x="180" y="85" width="340" height="15" fill="url(#endPlateGrad)" stroke="#000" stroke-width="2" rx="3"/>
                    <rect x="180" y="280" width="340" height="15" fill="url(#endPlateGrad)" stroke="#000" stroke-width="2" rx="3"/>
                    
                    <!-- Bolts/Fasteners -->
                    <circle cx="190" cy="92" r="5" fill="#616161" stroke="#000" stroke-width="1"/>
                    <circle cx="510" cy="92" r="5" fill="#616161" stroke="#000" stroke-width="1"/>
                    <circle cx="190" cy="287" r="5" fill="#616161" stroke="#000" stroke-width="1"/>
                    <circle cx="510" cy="287" r="5" fill="#616161" stroke="#000" stroke-width="1"/>
                    
                    <!-- Manifolds and Ports -->
                    <!-- H2 inlet -->
                    <rect x="160" y="130" width="25" height="30" fill="#1976d2" stroke="#0d47a1" stroke-width="2" rx="3"/>
                    <circle cx="172" cy="145" r="6" fill="#0d47a1"/>
                    <text x="130" y="150" font-size="11" font-weight="bold" fill="#1976d2">H‚ÇÇ IN</text>
                    
                    <!-- Air inlet -->
                    <rect x="160" y="200" width="25" height="30" fill="#4caf50" stroke="#2e7d32" stroke-width="2" rx="3"/>
                    <circle cx="172" cy="215" r="6" fill="#2e7d32"/>
                    <text x="125" y="220" font-size="11" font-weight="bold" fill="#4caf50">AIR IN</text>
                    
                    <!-- Coolant inlet -->
                    <rect x="515" y="130" width="25" height="30" fill="#03a9f4" stroke="#0277bd" stroke-width="2" rx="3"/>
                    <circle cx="527" cy="145" r="6" fill="#0277bd"/>
                    <text x="545" y="150" font-size="11" font-weight="bold" fill="#03a9f4">COOLANT</text>
                    <text x="555" y="162" font-size="10" fill="#03a9f4">IN</text>
                    
                    <!-- Exhaust/Water outlet -->
                    <rect x="515" y="200" width="25" height="30" fill="#2196f3" stroke="#1565c0" stroke-width="2" rx="3"/>
                    <circle cx="527" cy="215" r="6" fill="#1565c0"/>
                    <text x="545" y="220" font-size="11" font-weight="bold" fill="#2196f3">H‚ÇÇO +</text>
                    <text x="545" y="232" font-size="11" font-weight="bold" fill="#2196f3">AIR OUT</text>
                    
                    <!-- Electrical Terminals -->
                    <rect x="320" y="70" width="30" height="15" fill="#ff5722" stroke="#bf360c" stroke-width="2" rx="2"/>
                    <text x="335" y="81" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">+</text>
                    <text x="335" y="65" text-anchor="middle" font-size="10" font-weight="bold" fill="#ff5722">POSITIVE</text>
                    
                    <rect x="360" y="70" width="30" height="15" fill="#424242" stroke="#000" stroke-width="2" rx="2"/>
                    <text x="375" y="81" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">‚àí</text>
                    <text x="375" y="65" text-anchor="middle" font-size="10" font-weight="bold" fill="#424242">NEGATIVE</text>
                    
                    <!-- Power cable -->
                    <path d="M 335 70 L 335 40 M 375 70 L 375 40" stroke="#ff9800" stroke-width="4"/>
                    <text x="355" y="35" text-anchor="middle" font-size="11" font-weight="bold" fill="#ff9800">48V DC OUTPUT</text>
                    
                    <!-- Cooling fins/heat exchanger -->
                    <g>
                        <rect x="180" y="310" width="340" height="5" fill="#90a4ae" stroke="#546e7a" stroke-width="1"/>
                        <line x1="200" y1="315" x2="200" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="220" y1="315" x2="220" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="240" y1="315" x2="240" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="260" y1="315" x2="260" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="280" y1="315" x2="280" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="300" y1="315" x2="300" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="320" y1="315" x2="320" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="340" y1="315" x2="340" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="360" y1="315" x2="360" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="380" y1="315" x2="380" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="400" y1="315" x2="400" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="420" y1="315" x2="420" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="440" y1="315" x2="440" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="460" y1="315" x2="460" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="480" y1="315" x2="480" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <line x1="500" y1="315" x2="500" y2="330" stroke="#546e7a" stroke-width="2"/>
                        <text x="350" y="350" text-anchor="middle" font-size="10" fill="#546e7a">Cooling Fins</text>
                    </g>
                    
                    <!-- Dimensions -->
                    <g>
                        <!-- Width dimension -->
                        <line x1="180" y1="370" x2="520" y2="370" stroke="#333" stroke-width="1" marker-start="url(#arrowDim)" marker-end="url(#arrowDim)"/>
                        <text x="350" y="385" text-anchor="middle" font-size="12" font-weight="bold" fill="#333">~30 cm (300 mm)</text>
                        
                        <!-- Height dimension -->
                        <line x1="560" y1="85" x2="560" y2="295" stroke="#333" stroke-width="1" marker-start="url(#arrowDim)" marker-end="url(#arrowDim)"/>
                        <text x="600" y="195" font-size="12" font-weight="bold" fill="#333">~20 cm</text>
                        
                        <!-- Depth label -->
                        <text x="50" y="190" font-size="12" font-weight="bold" fill="#333">Depth:</text>
                        <text x="50" y="205" font-size="12" font-weight="bold" fill="#333">~15 cm</text>
                    </g>
                    
                    <!-- Specifications Box -->
                    <rect x="30" y="410" width="640" height="80" fill="#f5f5f5" stroke="#999" stroke-width="2" rx="8"/>
                    <text x="350" y="430" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Typical Specifications</text>
                    
                    <text x="50" y="450" font-size="11" fill="#333"><tspan font-weight="bold">Power Output:</tspan> 1.2-3 kW continuous | <tspan font-weight="bold">Voltage:</tspan> 40-52V (48V nominal)</text>
                    <text x="50" y="465" font-size="11" fill="#333"><tspan font-weight="bold">Weight:</tspan> 8-15 kg (stack only) | <tspan font-weight="bold">Efficiency:</tspan> 45-55% (system level)</text>
                    <text x="50" y="480" font-size="11" fill="#333"><tspan font-weight="bold">Operating Temp:</tspan> 60-80¬∞C | <tspan font-weight="bold">Lifetime:</tspan> 5,000-8,000 hours | <tspan font-weight="bold">Manufacturer Examples:</tspan> Ballard, Plug Power, Horizon, Heliocentris</text>
                    
                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowDim" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto">
                            <path d="M0,4 L8,0 L8,8 Z" fill="#333"/>
                        </marker>
                    </defs>
                </svg>
                <p style="margin-top: 1rem;"><strong>Figure 0.1:</strong> Realistic representation of a compact PEM fuel cell stack suitable for golf cart applications. The stack consists of 60-72 individual cells stacked in series to produce 48V DC output, with integrated manifolds for hydrogen, air, and coolant distribution.</p>
            </div>
        </div>

        <!-- Module 1: Fundamentals -->
        <div class="module">
            <h2>‚öõÔ∏è Module 1: Fuel Cell Fundamentals</h2>

            <h3>What is a Fuel Cell?</h3>
            <p>A fuel cell converts chemical energy from hydrogen and oxygen directly into electricity through electrochemical reactions, producing only water and heat as byproducts.</p>

            <div class="info-box">
                <h3>Fuel Cells vs Batteries</h3>
                <p><strong>Batteries:</strong> Store energy, must be recharged when depleted</p>
                <p><strong>Fuel Cells:</strong> Generate electricity continuously as long as fuel is supplied</p>
            </div>

            <h3>Basic Reactions</h3>
            <div class="key-point">
                <p><strong>Anode (Hydrogen Oxidation):</strong> H‚ÇÇ ‚Üí 2H‚Å∫ + 2e‚Åª</p>
                <p>Hydrogen splits into protons and electrons</p>
                
                <p style="margin-top: 1rem;"><strong>Cathode (Oxygen Reduction):</strong> ¬ΩO‚ÇÇ + 2H‚Å∫ + 2e‚Åª ‚Üí H‚ÇÇO</p>
                <p>Oxygen combines with protons and electrons to form water</p>
                
                <p style="margin-top: 1rem;"><strong>Overall:</strong> H‚ÇÇ + ¬ΩO‚ÇÇ ‚Üí H‚ÇÇO + Electricity + Heat</p>
            </div>

            <h3>Types of Fuel Cells</h3>
            <table>
                <tr>
                    <th>Type</th>
                    <th>Operating Temp</th>
                    <th>Best For</th>
                </tr>
                <tr>
                    <td><strong>PEM (Proton Exchange Membrane)</strong></td>
                    <td>60-80¬∞C</td>
                    <td>Vehicles, portable power</td>
                </tr>
                <tr>
                    <td>Solid Oxide (SOFC)</td>
                    <td>600-1000¬∞C</td>
                    <td>Stationary power</td>
                </tr>
                <tr>
                    <td>Alkaline (AFC)</td>
                    <td>60-90¬∞C</td>
                    <td>Space, military</td>
                </tr>
            </table>

            <div class="info-box">
                <h3>Why PEM for Golf Carts?</h3>
                <ul>
                    <li>Low operating temperature (quick startup)</li>
                    <li>High power density (compact, lightweight)</li>
                    <li>Fast response to power demands</li>
                    <li>Proven technology with established supply chain</li>
                </ul>
            </div>

            <h3>Fuel Cell Schematic Diagram</h3>
            <div class="canvas-box">
                <svg width="800" height="450" viewBox="0 0 800 450" style="max-width: 100%; height: auto;">
                    <!-- Title -->
                    <text x="400" y="25" text-anchor="middle" font-size="20" font-weight="bold" fill="#333">Proton Exchange Membrane (PEM) Fuel Cell Operation</text>
                    
                    <!-- Anode Side -->
                    <rect x="50" y="100" width="220" height="250" fill="#e3f2fd" stroke="#1976d2" stroke-width="3" rx="10"/>
                    <text x="160" y="130" text-anchor="middle" font-size="18" font-weight="bold" fill="#1976d2">ANODE (-)</text>
                    <text x="160" y="150" text-anchor="middle" font-size="14" fill="#333">Negative Electrode</text>
                    
                    <!-- Hydrogen Input -->
                    <path d="M 20 200 L 50 200" stroke="#1976d2" stroke-width="3" marker-end="url(#arrowH2)"/>
                    <text x="15" y="185" font-size="16" font-weight="bold" fill="#1976d2">H‚ÇÇ</text>
                    <text x="10" y="215" font-size="11" fill="#333">Hydrogen</text>
                    <text x="15" y="227" font-size="11" fill="#333">Gas</text>
                    
                    <!-- Anode Reaction -->
                    <text x="160" y="210" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Oxidation Reaction:</text>
                    <text x="160" y="235" text-anchor="middle" font-size="18" font-weight="bold" fill="#1976d2">H‚ÇÇ ‚Üí 2H‚Å∫ + 2e‚Åª</text>
                    
                    <!-- Catalyst Layer Anode -->
                    <rect x="80" y="255" width="160" height="20" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
                    <text x="160" y="269" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">Pt Catalyst Layer</text>
                    
                    <!-- Water out from anode (minimal) -->
                    <path d="M 160 350 L 160 380" stroke="#2196f3" stroke-width="2" stroke-dasharray="3,3"/>
                    <text x="160" y="395" text-anchor="middle" font-size="10" fill="#666">H‚ÇÇO (trace)</text>
                    
                    <!-- Membrane -->
                    <rect x="270" y="100" width="60" height="250" fill="#fff3e0" stroke="#f57c00" stroke-width="4" rx="5"/>
                    <text x="300" y="160" text-anchor="middle" font-size="14" font-weight="bold" fill="#f57c00" transform="rotate(-90 300 160)">PROTON EXCHANGE</text>
                    <text x="300" y="260" text-anchor="middle" font-size="14" font-weight="bold" fill="#f57c00" transform="rotate(-90 300 260)">MEMBRANE (Nafion)</text>
                    
                    <!-- Proton Flow through membrane -->
                    <circle cx="285" cy="180" r="6" fill="#f57c00">
                        <animate attributeName="cx" from="285" to="315" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="285" cy="210" r="6" fill="#f57c00">
                        <animate attributeName="cx" from="285" to="315" dur="2.3s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="285" cy="240" r="6" fill="#f57c00">
                        <animate attributeName="cx" from="285" to="315" dur="1.8s" repeatCount="indefinite"/>
                    </circle>
                    <text x="300" y="300" text-anchor="middle" font-size="12" fill="#f57c00" font-weight="bold">H‚Å∫ ‚Üí</text>
                    
                    <!-- Cathode Side -->
                    <rect x="330" y="100" width="220" height="250" fill="#fce4ec" stroke="#c2185b" stroke-width="3" rx="10"/>
                    <text x="440" y="130" text-anchor="middle" font-size="18" font-weight="bold" fill="#c2185b">CATHODE (+)</text>
                    <text x="440" y="150" text-anchor="middle" font-size="14" fill="#333">Positive Electrode</text>
                    
                    <!-- Oxygen Input -->
                    <path d="M 580 200 L 550 200" stroke="#c2185b" stroke-width="3" marker-end="url(#arrowO2)"/>
                    <text x="590" y="185" font-size="16" font-weight="bold" fill="#c2185b">O‚ÇÇ</text>
                    <text x="585" y="215" font-size="11" fill="#333">Oxygen</text>
                    <text x="585" y="227" font-size="11" fill="#333">(from Air)</text>
                    
                    <!-- Cathode Reaction -->
                    <text x="440" y="195" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Reduction Reaction:</text>
                    <text x="440" y="220" text-anchor="middle" font-size="16" font-weight="bold" fill="#c2185b">¬ΩO‚ÇÇ + 2H‚Å∫ + 2e‚Åª</text>
                    <text x="440" y="240" text-anchor="middle" font-size="18" font-weight="bold" fill="#c2185b">‚Üí H‚ÇÇO</text>
                    
                    <!-- Catalyst Layer Cathode -->
                    <rect x="360" y="255" width="160" height="20" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
                    <text x="440" y="269" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">Pt Catalyst Layer</text>
                    
                    <!-- Water Output -->
                    <path d="M 440 350 L 440 390" stroke="#2196f3" stroke-width="4" marker-end="url(#arrowWater)"/>
                    <text x="440" y="415" text-anchor="middle" font-size="16" font-weight="bold" fill="#2196f3">H‚ÇÇO + Heat</text>
                    <text x="440" y="430" text-anchor="middle" font-size="11" fill="#333">Water Vapor Output</text>
                    
                    <!-- External Circuit (Electron Flow) -->
                    <path d="M 160 100 L 160 50 L 440 50 L 440 100" stroke="#ff9800" stroke-width="5" fill="none"/>
                    <text x="300" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="#ff9800">EXTERNAL CIRCUIT</text>
                    
                    <!-- Electron flow animation -->
                    <circle cx="160" cy="50" r="8" fill="#ff9800">
                        <animate attributeName="cx" from="160" to="440" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="160" cy="50" r="8" fill="#ff9800">
                        <animate attributeName="cx" from="160" to="440" dur="3s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="160" cy="50" r="8" fill="#ff9800">
                        <animate attributeName="cx" from="160" to="440" dur="3s" begin="2s" repeatCount="indefinite"/>
                    </circle>
                    
                    <!-- Electron labels -->
                    <text x="210" y="70" font-size="14" font-weight="bold" fill="#ff9800">e‚Åª ‚Üí Electricity Generation ‚Üí e‚Åª</text>
                    
                    <!-- Load Symbol -->
                    <rect x="280" y="45" width="40" height="20" fill="none" stroke="#333" stroke-width="2"/>
                    <path d="M 285 50 L 290 55 L 295 50 L 300 55 L 305 50 L 310 55 L 315 50" stroke="#333" stroke-width="2" fill="none"/>
                    <text x="300" y="80" text-anchor="middle" font-size="10" fill="#333">LOAD</text>
                    <text x="300" y="90" text-anchor="middle" font-size="9" fill="#666">(Motor)</text>
                    
                    <!-- Overall Reaction Box -->
                    <rect x="600" y="100" width="180" height="250" fill="#e8f5e9" stroke="#2e7d32" stroke-width="3" rx="10"/>
                    <text x="690" y="130" text-anchor="middle" font-size="14" font-weight="bold" fill="#2e7d32">OVERALL</text>
                    <text x="690" y="150" text-anchor="middle" font-size="14" font-weight="bold" fill="#2e7d32">REACTION</text>
                    
                    <text x="690" y="190" text-anchor="middle" font-size="16" fill="#333">2H‚ÇÇ + O‚ÇÇ</text>
                    <text x="690" y="215" text-anchor="middle" font-size="18" font-weight="bold" fill="#2e7d32">‚Üí</text>
                    <text x="690" y="240" text-anchor="middle" font-size="16" fill="#333">2H‚ÇÇO</text>
                    <text x="690" y="260" text-anchor="middle" font-size="14" fill="#333">+ Electricity</text>
                    <text x="690" y="280" text-anchor="middle" font-size="14" fill="#333">+ Heat</text>
                    
                    <text x="690" y="315" text-anchor="middle" font-size="12" font-weight="bold" fill="#4caf50">‚úì Zero Emissions</text>
                    <text x="690" y="330" text-anchor="middle" font-size="12" font-weight="bold" fill="#4caf50">‚úì High Efficiency</text>
                    
                    <!-- Arrow Markers -->
                    <defs>
                        <marker id="arrowH2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L9,3 z" fill="#1976d2"/>
                        </marker>
                        <marker id="arrowO2" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto">
                            <path d="M9,0 L9,6 L0,3 z" fill="#c2185b"/>
                        </marker>
                        <marker id="arrowWater" markerWidth="10" markerHeight="10" refX="3" refY="0" orient="auto">
                            <path d="M0,0 L6,0 L3,9 z" fill="#2196f3"/>
                        </marker>
                    </defs>
                </svg>
                <p style="margin-top: 1rem;"><strong>Figure 1.1:</strong> Detailed schematic showing PEM fuel cell operation with hydrogen oxidation at anode, proton transport through membrane, oxygen reduction at cathode, and electron flow through external circuit generating electricity</p>
            </div>
        </div>

        <!-- Module 2: PEM Technology -->
        <div class="module">
            <h2>üî¨ Module 2: PEM Technology</h2>

            <h3>Performance Characteristics</h3>
            <div class="canvas-box">
                <canvas id="perfCanvas" width="700" height="300"></canvas>
                <p style="margin-top: 1rem;"><strong>Figure 2.1:</strong> Fuel cell voltage and power vs current density. The voltage curve (blue) shows cell voltage decreasing with load due to activation, ohmic, and mass transport losses. The power curve (red) shows peak power output occurring at moderate current densities.</p>
            </div>

            <h3>Key Specifications</h3>
            <table>
                <tr>
                    <th>Parameter</th>
                    <th>Typical Value</th>
                    <th>Notes</th>
                </tr>
                <tr>
                    <td>Single Cell Voltage</td>
                    <td>0.6-0.8 V</td>
                    <td>Operating range (OCV: 0.95-1.0V)</td>
                </tr>
                <tr>
                    <td>Power Density</td>
                    <td>0.4-1.0 W/cm¬≤</td>
                    <td>At active area</td>
                </tr>
                <tr>
                    <td>System Efficiency</td>
                    <td>40-60%</td>
                    <td>LHV basis, including BoP losses</td>
                </tr>
                <tr>
                    <td>Operating Temperature</td>
                    <td>60-80¬∞C</td>
                    <td>Optimal for PEM</td>
                </tr>
                <tr>
                    <td>Startup Time</td>
                    <td>< 30 seconds</td>
                    <td>From ambient temperature</td>
                </tr>
            </table>

            <h3>Membrane Electrode Assembly (MEA)</h3>
            <div class="info-box">
                <h4>Key Components:</h4>
                <p><strong>1. Proton Exchange Membrane:</strong> Nafion¬Æ polymer (15-50 Œºm thick) that conducts H‚Å∫ ions</p>
                <p><strong>2. Catalyst Layers:</strong> Platinum nanoparticles on carbon (0.2-0.4 mg Pt/cm¬≤ total)</p>
                <p><strong>3. Gas Diffusion Layers:</strong> Carbon fiber paper with PTFE coating (200-250 Œºm)</p>
                <p><strong>4. Bipolar Plates:</strong> Coated stainless steel or graphite composite with flow channels</p>
            </div>

            <div class="key-point">
                <h3>Water Management Challenge</h3>
                <p><strong>Too Dry:</strong> Membrane resistance increases (poor conductivity)</p>
                <p><strong>Too Wet:</strong> Water floods gas channels (mass transport limitations)</p>
                <p><strong>Solution:</strong> Control humidity (60-100% RH), temperature, and air stoichiometry</p>
            </div>
        </div>

        <!-- Module 3: System Components -->
        <div class="module">
            <h2>üîß Module 3: System Components</h2>

            <h3>Complete System Architecture</h3>
            <div class="info-box">
                <p>A fuel cell system requires many supporting components beyond the stack itself:</p>
                <ul>
                    <li><strong>Hydrogen Subsystem:</strong> Tank, pressure regulator, valves, sensors</li>
                    <li><strong>Air Management:</strong> Blower/compressor, filter, humidifier</li>
                    <li><strong>Thermal Management:</strong> Cooling loop, radiator, pump</li>
                    <li><strong>Water Management:</strong> Separator, drain valves</li>
                    <li><strong>Power Electronics:</strong> DC-DC converters, motor controller</li>
                    <li><strong>Control System:</strong> ECU with sensors and safety interlocks</li>
                </ul>
            </div>

            <h3>Golf Cart System Specifications</h3>
            <table>
                <tr>
                    <th>Component</th>
                    <th>Specification</th>
                    <th>Power</th>
                </tr>
                <tr>
                    <td>Fuel Cell Stack</td>
                    <td>48V, 2-3 kW continuous</td>
                    <td>N/A (source)</td>
                </tr>
                <tr>
                    <td>H‚ÇÇ Storage Tank</td>
                    <td>Type IV, 700 bar, 1-2 kg capacity</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>Air Blower</td>
                    <td>12V brushless, 100-200W</td>
                    <td>100-200W</td>
                </tr>
                <tr>
                    <td>Cooling Pump</td>
                    <td>12V centrifugal, 50-100W</td>
                    <td>50-100W</td>
                </tr>
                <tr>
                    <td>DC-DC Converter</td>
                    <td>48V, 3 kW, 93-96% eff</td>
                    <td>~100W loss</td>
                </tr>
                <tr>
                    <td>Hybrid Battery</td>
                    <td>48V Li-ion, 20Ah</td>
                    <td>N/A (buffer)</td>
                </tr>
                <tr>
                    <td>Motor Controller</td>
                    <td>48V, 5-7 kW peak</td>
                    <td>~100W loss</td>
                </tr>
                <tr>
                    <td>Electric Motor</td>
                    <td>48V, 5 kW continuous</td>
                    <td>Variable</td>
                </tr>
            </table>

            <div class="key-point">
                <h3>Parasitic Power Load</h3>
                <p>Auxiliary systems consume 200-400W during operation (10-15% of stack output). This must be factored into efficiency calculations.</p>
            </div>
        </div>

        <!-- Module 4: Golf Cart Application -->
        <div class="module">
            <h2>‚õ≥ Module 4: Golf Cart Application</h2>

            <h3>Power Requirements</h3>
            <div class="info-box">
                <p><strong>Typical Golf Cart Power Profile:</strong></p>
                <ul>
                    <li>Cruising at 25 km/h on flat: 0.8-1.2 kW</li>
                    <li>Climbing 10% grade: 2-3 kW</li>
                    <li>Acceleration peak: 3-4 kW</li>
                    <li>Auxiliary loads: 0.2-0.4 kW</li>
                </ul>
                <p style="margin-top: 1rem;"><strong>Recommended System:</strong> 2-3 kW FC + 2-3 kW battery + 5 kW motor</p>
            </div>

            <h3>Range Calculation</h3>
            <div class="key-point">
                <p><strong>Given:</strong></p>
                <ul>
                    <li>H‚ÇÇ storage: 1.0 kg at 700 bar</li>
                    <li>System efficiency: 45% (LHV basis)</li>
                    <li>Average power: 1.2 kW</li>
                    <li>H‚ÇÇ energy: 33.3 kWh/kg (LHV)</li>
                </ul>
                <p style="margin-top: 1rem;"><strong>Calculation:</strong></p>
                <p>Available energy = 1.0 kg √ó 33.3 kWh/kg √ó 45% = 15.0 kWh</p>
                <p>Operating time = 15.0 kWh √∑ 1.2 kW = 12.5 hours</p>
                <p>Range at 25 km/h = 12.5 h √ó 25 km/h = 312 km theoretical</p>
                <p style="margin-top: 1rem; color: #f5576c;"><strong>Practical range: 100-140 km per kg H‚ÇÇ</strong></p>
            </div>

            <h3>Performance Comparison</h3>
            <table>
                <tr>
                    <th>Metric</th>
                    <th>Lead-Acid</th>
                    <th>Lithium-Ion</th>
                    <th>Hydrogen FC</th>
                </tr>
                <tr>
                    <td>Range</td>
                    <td>40-60 km</td>
                    <td>60-80 km</td>
                    <td>80-120 km/kg H‚ÇÇ</td>
                </tr>
                <tr>
                    <td>Refuel Time</td>
                    <td>6-8 hours</td>
                    <td>2-4 hours</td>
                    <td>2-3 minutes</td>
                </tr>
                <tr>
                    <td>System Weight</td>
                    <td>400-600 kg</td>
                    <td>150-200 kg</td>
                    <td>80-120 kg</td>
                </tr>
                <tr>
                    <td>Lifetime</td>
                    <td>4-6 years</td>
                    <td>7-10 years</td>
                    <td>10-15 years (stack)</td>
                </tr>
            </table>

            <h3>Real-World Example</h3>
            <div class="info-box">
                <p><cite index="4-1">A fuel cell hybrid golf cart was tested over a 100-km drive on a plain route with an average speed of about 18 km/h. The fuel cell system had an efficiency of over 30% at the power consumption required for vehicle cruise.</cite></p>
                <p style="margin-top: 1rem;"><cite index="1-1">Hybrid fuel cell systems for light electric vehicles showed energy consumption of 0.11 kWh/km, with increases of up to 80% in maximum distance compared to battery-only systems.</cite></p>
            </div>
        </div>

        <!-- Module 5: Hybrid Integration -->
        <div class="module">
            <h2>üîå Module 5: Hybrid System Integration</h2>

            <h3>Topology Comparison</h3>
            <table>
                <tr>
                    <th>Topology</th>
                    <th>Efficiency</th>
                    <th>Cost</th>
                    <th>Best For</th>
                </tr>
                <tr>
                    <td>Direct Parallel (Passive)</td>
                    <td>75-82%</td>
                    <td>Lowest</td>
                    <td>DIY, Education</td>
                </tr>
                <tr>
                    <td>Semi-Active (FC Conv.)</td>
                    <td>82-88%</td>
                    <td>Moderate (+$400-600)</td>
                    <td><strong>Commercial Golf Carts</strong></td>
                </tr>
                <tr>
                    <td>Fully Active (Both Conv.)</td>
                    <td>85-92%</td>
                    <td>Highest (+$1000-1500)</td>
                    <td>Premium Applications</td>
                </tr>
            </table>

            <h3>Power Flow Visualization</h3>
            <div class="canvas-box">
                <canvas id="topoCanvas" width="700" height="300"></canvas>
                <div>
                    <button class="btn" onclick="drawTopology('cruise')">Cruise</button>
                    <button class="btn" onclick="drawTopology('acceleration')">Acceleration</button>
                    <button class="btn" onclick="drawTopology('braking')">Braking</button>
                </div>
                <p style="margin-top: 1rem;"><strong>Figure 5.1:</strong> Interactive power flow for different scenarios</p>
            </div>

            <h3>DC-DC Converter Specifications</h3>
            <div class="info-box">
                <h4>Unidirectional Boost Converter (for FC):</h4>
                <p><strong>Input:</strong> 25-45V DC (FC voltage range)</p>
                <p><strong>Output:</strong> 48V DC regulated (¬±2V)</p>
                <p><strong>Power:</strong> 3 kW continuous, 3.5 kW peak</p>
                <p><strong>Efficiency:</strong> 93-96% at rated power</p>
                <p><strong>Switching Frequency:</strong> 20-50 kHz</p>
                <p><strong>Critical:</strong> <5% current ripple (protects FC from stress)</p>
            </div>

            <div class="key-point">
                <h3>Recommended: Semi-Active Topology</h3>
                <p><strong>Why:</strong> Best balance of cost, performance, and reliability</p>
                <p><strong>Efficiency Gain:</strong> 7-10 percentage points vs passive</p>
                <p><strong>ROI:</strong> 2-3 year payback in commercial operation</p>
                <p><strong>Adoption:</strong> Industry standard for commercial FC golf carts</p>
            </div>
        </div>

        <!-- Module 6: Power Management -->
        <div class="module">
            <h2>‚ö° Module 6: Power Management</h2>

            <h3>Control Strategies</h3>
            <div class="info-box">
                <h4>1. Constant Power Strategy (Recommended):</h4>
                <p>FC runs at constant optimal power (60-70% rated)</p>
                <p>Battery provides all power variation</p>
                <p><strong>Advantages:</strong> Extended FC life, optimal efficiency</p>
                
                <h4 style="margin-top: 1.5rem;">2. Load Following Strategy:</h4>
                <p>FC output tracks load demand directly</p>
                <p><strong>Disadvantages:</strong> Frequent power changes reduce stack life</p>
            </div>

            <h3>Drive Cycle Simulation</h3>
            <div class="canvas-box">
                <canvas id="powerCanvas" width="700" height="300"></canvas>
                <button class="btn" onclick="drawPowerManagement()">‚ñ∂ Simulate Drive Cycle</button>
                <p style="margin-top: 1rem;"><strong>Figure 6.1:</strong> Hybrid power split during typical golf cart operation</p>
            </div>

            <h3>Battery SOC Management</h3>
            <table>
                <tr>
                    <th>SOC Range</th>
                    <th>Operating Mode</th>
                    <th>Strategy</th>
                </tr>
                <tr>
                    <td>90-100%</td>
                    <td>Full Charge</td>
                    <td>FC output reduced, battery provides main power</td>
                </tr>
                <tr>
                    <td>50-90%</td>
                    <td>Normal Operation</td>
                    <td>Hybrid mode, optimal power split</td>
                </tr>
                <tr>
                    <td>30-50%</td>
                    <td>Charge Priority</td>
                    <td>FC runs at higher power to recharge battery</td>
                </tr>
                <tr>
                    <td>20-30%</td>
                    <td>Low Battery Warning</td>
                    <td>FC maximum output, limited battery discharge</td>
                </tr>
            </table>

            <div class="key-point">
                <h3>Key Takeaway</h3>
                <p>Operating the FC at 50-70% of maximum power provides the best balance between efficiency, component life, and performance. The hybrid battery handles power variations, allowing the FC to run in its optimal range.</p>
            </div>
        </div>

        <!-- Module 7: Safety & Storage -->
        <div class="module">
            <h2>üõ°Ô∏è Module 7: Safety & Storage</h2>

            <h3>Hydrogen Properties</h3>
            <table>
                <tr>
                    <th>Property</th>
                    <th>Hydrogen</th>
                    <th>Gasoline</th>
                </tr>
                <tr>
                    <td>Flammability Range</td>
                    <td>4-75%</td>
                    <td>1-7.6%</td>
                </tr>
                <tr>
                    <td>Auto-ignition Temp</td>
                    <td>585¬∞C</td>
                    <td>228-501¬∞C</td>
                </tr>
                <tr>
                    <td>Density vs Air</td>
                    <td>14√ó lighter (rises fast)</td>
                    <td>Heavier (pools)</td>
                </tr>
                <tr>
                    <td>Toxicity</td>
                    <td>Non-toxic</td>
                    <td>Carcinogenic</td>
                </tr>
            </table>

            <h3>Type IV Hydrogen Storage Tank</h3>
            <div class="info-box">
                <p><strong>Construction:</strong> Polymer liner wrapped with carbon fiber</p>
                <p><strong>Pressure:</strong> 700 bar (10,000 psi) standard</p>
                <p><strong>Weight:</strong> 40-45 kg for 1 kg H‚ÇÇ capacity</p>
                <p><strong>Capacity:</strong> 6-7 wt% gravimetric density</p>
                <p><strong>Safety:</strong> Pressure relief device (PRD), thermal protection</p>
                <p><strong>Lifetime:</strong> 15-20 years or 10,000-20,000 fill cycles</p>
            </div>

            <h3>Safety Standards</h3>
            <table>
                <tr>
                    <th>Standard</th>
                    <th>Title</th>
                    <th>Scope</th>
                </tr>
                <tr>
                    <td>UN ECE R134</td>
                    <td>Hydrogen and Fuel Cell Vehicles</td>
                    <td>Vehicle-level safety</td>
                </tr>
                <tr>
                    <td>SAE J2579</td>
                    <td>Fuel Systems in Fuel Cell Vehicles</td>
                    <td>Design and testing</td>
                </tr>
                <tr>
                    <td>ISO 19881</td>
                    <td>Land Vehicle Fuel Containers</td>
                    <td>Tank certification</td>
                </tr>
                <tr>
                    <td>NFPA 2</td>
                    <td>Hydrogen Technologies Code</td>
                    <td>Storage, handling, use</td>
                </tr>
            </table>

            <div class="key-point">
                <h3>Emergency Response</h3>
                <p><strong>Hydrogen Leak:</strong></p>
                <ul>
                    <li>Sensor alarm triggers automatic H‚ÇÇ valve closure</li>
                    <li>Ventilate area (hydrogen rises rapidly)</li>
                    <li>No ignition sources until concentration <1%</li>
                    <li>Locate and repair leak before restarting</li>
                </ul>
            </div>
        </div>

        <!-- Module 8: Advanced Topics -->
        <div class="module">
            <h2>üöÄ Module 8: Advanced Topics</h2>

            <h3>Stack Technology Advances</h3>
            <table>
                <tr>
                    <th>Technology</th>
                    <th>Current (2024)</th>
                    <th>Target (2030)</th>
                </tr>
                <tr>
                    <td>Pt Loading</td>
                    <td>0.2-0.4 mg/cm¬≤</td>
                    <td>0.1-0.125 mg/cm¬≤</td>
                </tr>
                <tr>
                    <td>Power Density</td>
                    <td>0.8-1.2 W/cm¬≤</td>
                    <td>1.5-2.0 W/cm¬≤</td>
                </tr>
                <tr>
                    <td>Lifetime</td>
                    <td>5,000-8,000 hours</td>
                    <td>10,000-15,000 hours</td>
                </tr>
                <tr>
                    <td>Stack Cost</td>
                    <td>$80-150/kW</td>
                    <td>$30-45/kW</td>
                </tr>
            </table>

            <h3>Green Hydrogen Production</h3>
            <div class="info-box">
                <p><strong>Electrolysis with Renewable Energy:</strong></p>
                <p>H‚ÇÇO ‚Üí H‚ÇÇ + O‚ÇÇ (using solar/wind electricity)</p>
                <p><strong>Efficiency:</strong> 70-85%</p>
                <p><strong>Current Cost:</strong> $5-8/kg (2024)</p>
                <p><strong>Target Cost:</strong> $1-2/kg (competitive with fossil fuels)</p>
            </div>

            <h3>Future Outlook</h3>
            <div class="key-point">
                <h4>Near-Term (2025-2027):</h4>
                <ul>
                    <li>Continued deployment in resort and campus applications</li>
                    <li>5-10% cost reduction through volume production</li>
                    <li>Expanded refueling infrastructure at fleet locations</li>
                </ul>
                
                <h4>Medium-Term (2028-2032):</h4>
                <ul>
                    <li>Stack costs drop to $40-50/kW (50% reduction)</li>
                    <li>Standardized "fuel cell kits" for golf carts</li>
                    <li>Green hydrogen below $3/kg in many regions</li>
                </ul>
                
                <h4>Long-Term (2033+):</h4>
                <ul>
                    <li>FC systems cost-competitive with lithium batteries</li>
                    <li>Widespread hydrogen infrastructure</li>
                    <li>Near-zero emissions light vehicle transportation achieved</li>
                </ul>
            </div>

            <div class="info-box" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                <h3 style="color: white;">üéì Course Complete!</h3>
                <p>You now understand:</p>
                <ul>
                    <li>‚úì Fuel cell fundamentals and PEM technology</li>
                    <li>‚úì Complete system architecture</li>
                    <li>‚úì Hybrid integration topologies</li>
                    <li>‚úì Power management strategies</li>
                    <li>‚úì Safety and storage systems</li>
                    <li>‚úì Future developments</li>
                </ul>
                <p style="margin-top: 1rem;">This knowledge prepares you for real-world hydrogen fuel cell system design and integration!</p>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentModule = 0;
        
        // Module navigation
        function showModule(index) {
            const modules = document.querySelectorAll('.module');
            const navBtns = document.querySelectorAll('.nav-btn');
            const progressBar = document.getElementById('progressBar');
            
            modules.forEach((module, i) => {
                module.classList.remove('active');
                navBtns[i].classList.remove('active');
            });
            
            modules[index].classList.add('active');
            navBtns[index].classList.add('active');
            currentModule = index;
            
            // Update progress bar
            const progress = ((index + 1) / modules.length) * 100;
            progressBar.style.width = progress + '%';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Redraw canvases if needed
            setTimeout(() => {
                if (index === 2) drawPerformanceCurve();
                if (index === 5) drawTopology('cruise');
                if (index === 6) drawPowerManagement();
            }, 100);
        }

        // Canvas 1: Performance Curve
        function drawPerformanceCurve() {
            const canvas = document.getElementById('perfCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, w, h);
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(60, 40);
            ctx.lineTo(60, 260);
            ctx.lineTo(660, 260);
            ctx.stroke();
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Current Density (A/cm¬≤)', 360, 290);
            
            ctx.save();
            ctx.translate(20, 150);
            ctx.rotate(-Math.PI/2);
            ctx.fillText('Voltage (V)', 0, 0);
            ctx.restore();
            
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let i = 0; i <= 100; i++) {
                const current = i / 20;
                const voltage = 0.95 - 0.05 * current - 0.08 * Math.pow(current, 1.5) - 0.02 * Math.pow(current, 2);
                const x = 60 + current * 120;
                const y = 260 - voltage * 200;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            ctx.strokeStyle = '#f5576c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let i = 0; i <= 100; i++) {
                const current = i / 20;
                const voltage = 0.95 - 0.05 * current - 0.08 * Math.pow(current, 1.5) - 0.02 * Math.pow(current, 2);
                const power = voltage * current;
                const x = 60 + current * 120;
                const y = 260 - power * 80;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            ctx.fillStyle = '#667eea';
            ctx.fillRect(550, 50, 30, 4);
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('Voltage', 590, 55);
            
            ctx.fillStyle = '#f5576c';
            ctx.fillRect(550, 70, 30, 4);
            ctx.fillStyle = '#333';
            ctx.fillText('Power', 590, 75);
        }

        // Canvas 2: Topology
        function drawTopology(mode) {
            const canvas = document.getElementById('topoCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, w, h);
            
            const modes = {
                cruise: { fc: 1.2, batt: 0, motor: 1.2, title: 'Cruise Mode (1.2 kW)' },
                acceleration: { fc: 2.5, batt: 2.0, motor: 4.5, title: 'Acceleration (4.5 kW)' },
                braking: { fc: 0, batt: -2.0, motor: -2.0, title: 'Regenerative Braking (-2 kW)' }
            };
            
            const data = modes[mode];
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(data.title, w/2, 30);
            
            ctx.fillStyle = '#f3e5f5';
            ctx.strokeStyle = '#7b1fa2';
            ctx.lineWidth = 3;
            ctx.fillRect(80, 100, 120, 60);
            ctx.strokeRect(80, 100, 120, 60);
            ctx.fillStyle = '#7b1fa2';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Fuel Cell', 140, 125);
            ctx.font = '12px Arial';
            ctx.fillText(data.fc.toFixed(1) + ' kW', 140, 145);
            
            ctx.fillStyle = '#ffebee';
            ctx.strokeStyle = '#c62828';
            ctx.fillRect(80, 200, 120, 60);
            ctx.strokeRect(80, 200, 120, 60);
            ctx.fillStyle = '#c62828';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Battery', 140, 225);
            ctx.font = '12px Arial';
            const battSign = data.batt >= 0 ? '+' : '';
            ctx.fillText(battSign + data.batt.toFixed(1) + ' kW', 140, 245);
            
            ctx.strokeStyle = '#ff9800';
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.moveTo(280, 130);
            ctx.lineTo(280, 230);
            ctx.stroke();
            ctx.fillStyle = '#ff9800';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('DC Bus', 280, 100);
            ctx.font = '12px Arial';
            ctx.fillText('48V', 280, 115);
            
            ctx.fillStyle = '#e3f2fd';
            ctx.strokeStyle = '#1565c0';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(550, 180, 50, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = '#1565c0';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Motor', 550, 175);
            ctx.font = '12px Arial';
            ctx.fillText(Math.abs(data.motor).toFixed(1) + ' kW', 550, 195);
            
            if (data.fc > 0) {
                ctx.strokeStyle = '#7b1fa2';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(200, 130);
                ctx.lineTo(260, 130);
                ctx.stroke();
                ctx.fillStyle = '#7b1fa2';
                ctx.beginPath();
                ctx.moveTo(260, 130);
                ctx.lineTo(250, 125);
                ctx.lineTo(250, 135);
                ctx.fill();
            }
            
            if (data.batt > 0) {
                ctx.strokeStyle = '#c62828';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(200, 230);
                ctx.lineTo(260, 230);
                ctx.stroke();
                ctx.fillStyle = '#c62828';
                ctx.beginPath();
                ctx.moveTo(260, 230);
                ctx.lineTo(250, 225);
                ctx.lineTo(250, 235);
                ctx.fill();
            } else if (data.batt < 0) {
                ctx.strokeStyle = '#4caf50';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(260, 230);
                ctx.lineTo(200, 230);
                ctx.stroke();
                ctx.fillStyle = '#4caf50';
                ctx.beginPath();
                ctx.moveTo(200, 230);
                ctx.lineTo(210, 225);
                ctx.lineTo(210, 235);
                ctx.fill();
            }
            
            if (data.motor > 0) {
                ctx.strokeStyle = '#ff9800';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(300, 180);
                ctx.lineTo(500, 180);
                ctx.stroke();
                ctx.fillStyle = '#ff9800';
                ctx.beginPath();
                ctx.moveTo(500, 180);
                ctx.lineTo(490, 175);
                ctx.lineTo(490, 185);
                ctx.fill();
            }
        }

        // Canvas 3: Power Management with Sequential Animation (Fixed)
        function drawPowerManagement() {
            const canvas = document.getElementById('powerCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            const profile = [
                {t:0, total:0, fc:0}, {t:2, total:2, fc:2}, {t:4, total:2, fc:2},
                {t:6, total:4.5, fc:3}, {t:8, total:2.5, fc:3}, {t:10, total:2, fc:2.5},
                {t:12, total:3.5, fc:3}, {t:14, total:2, fc:2.5}, {t:16, total:0.5, fc:2},
                {t:18, total:0, fc:0}
            ];
            
            let currentIndex = 0;
            let phase = 1;
            let isAnimating = false;
            
            function clearAndDrawAxes() {
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, w, h);
                
                // Draw axes
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(60, 70);
                ctx.lineTo(60, 260);
                ctx.lineTo(660, 260);
                ctx.stroke();
                
                // Draw grid lines
                ctx.strokeStyle = '#e0e0e0';
                ctx.lineWidth = 1;
                for (let i = 1; i <= 4; i++) {
                    ctx.beginPath();
                    ctx.moveTo(60, 70 + i * 47.5);
                    ctx.lineTo(660, 70 + i * 47.5);
                    ctx.stroke();
                }
                
                ctx.fillStyle = '#333';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Time (seconds)', 360, 290);
                
                ctx.save();
                ctx.translate(20, 165);
                ctx.rotate(-Math.PI/2);
                ctx.fillText('Power (kW)', 0, 0);
                ctx.restore();
                
                // Y-axis labels
                ctx.font = '11px Arial';
                ctx.textAlign = 'right';
                for (let i = 0; i <= 4; i++) {
                    ctx.fillText(i.toString(), 55, 265 - i * 47.5);
                }
            }
            
            function drawProfile(endIndex, showPhase) {
                clearAndDrawAxes();
                
                const currentProfile = profile.slice(0, endIndex + 1);
                
                // Always draw Total Demand first
                if (showPhase >= 1 && currentProfile.length > 0) {
                    ctx.setLineDash([5, 5]);
                    ctx.strokeStyle = '#333';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    currentProfile.forEach((p, i) => {
                        const x = 60 + p.t * 30;
                        const y = 260 - p.total * 47.5;
                        if (i === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    });
                    ctx.stroke();
                    ctx.setLineDash([]);
                }
                
                // Draw FC Power
                if (showPhase >= 2 && currentProfile.length > 0) {
                    ctx.fillStyle = 'rgba(123, 31, 162, 0.5)';
                    ctx.beginPath();
                    currentProfile.forEach((p, i) => {
                        const x = 60 + p.t * 30;
                        const y = 260 - p.fc * 47.5;
                        if (i === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    });
                    ctx.lineTo(60 + currentProfile[currentProfile.length - 1].t * 30, 260);
                    ctx.lineTo(60, 260);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.strokeStyle = '#7b1fa2';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    currentProfile.forEach((p, i) => {
                        const x = 60 + p.t * 30;
                        const y = 260 - p.fc * 47.5;
                        if (i === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    });
                    ctx.stroke();
                }
                
                // Phase 3: Battery DISCHARGE (RED when total > fc)
                if (showPhase >= 3 && currentProfile.length > 1) {
                    ctx.fillStyle = 'rgba(244, 67, 54, 0.7)';
                    
                    for (let i = 0; i < currentProfile.length - 1; i++) {
                        const p1 = currentProfile[i];
                        const p2 = currentProfile[i + 1];
                        
                        if (p1.total > p1.fc && p2.total > p2.fc) {
                            ctx.beginPath();
                            const x1 = 60 + p1.t * 30;
                            const x2 = 60 + p2.t * 30;
                            const yFC1 = 260 - p1.fc * 47.5;
                            const yFC2 = 260 - p2.fc * 47.5;
                            const yTotal1 = 260 - p1.total * 47.5;
                            const yTotal2 = 260 - p2.total * 47.5;
                            
                            ctx.moveTo(x1, yFC1);
                            ctx.lineTo(x2, yFC2);
                            ctx.lineTo(x2, yTotal2);
                            ctx.lineTo(x1, yTotal1);
                            ctx.closePath();
                            ctx.fill();
                        }
                    }
                }
                
                // Phase 4: Battery CHARGE (GREEN when fc > total)
                if (showPhase >= 4 && currentProfile.length > 1) {
                    ctx.fillStyle = 'rgba(76, 175, 80, 0.7)';
                    
                    for (let i = 0; i < currentProfile.length - 1; i++) {
                        const p1 = currentProfile[i];
                        const p2 = currentProfile[i + 1];
                        
                        if (p1.fc > p1.total && p2.fc > p2.total) {
                            ctx.beginPath();
                            const x1 = 60 + p1.t * 30;
                            const x2 = 60 + p2.t * 30;
                            const yFC1 = 260 - p1.fc * 47.5;
                            const yFC2 = 260 - p2.fc * 47.5;
                            const yTotal1 = 260 - p1.total * 47.5;
                            const yTotal2 = 260 - p2.total * 47.5;
                            
                            ctx.moveTo(x1, yTotal1);
                            ctx.lineTo(x2, yTotal2);
                            ctx.lineTo(x2, yFC2);
                            ctx.lineTo(x1, yFC1);
                            ctx.closePath();
                            ctx.fill();
                        }
                    }
                }
                
                // Draw legend
                ctx.fillStyle = '#333';
                ctx.font = 'bold 11px Arial';
                ctx.textAlign = 'left';
                if (showPhase >= 1) ctx.fillText('‚îÅ‚îÅ‚îÅ  Total Demand', 560, 45);
                if (showPhase >= 2) {
                    ctx.fillStyle = '#7b1fa2';
                    ctx.fillText('‚îÅ‚îÅ‚îÅ  Fuel Cell Output', 560, 58);
                }
                if (showPhase >= 3) {
                    ctx.fillStyle = '#f44336';
                    ctx.fillText('‚ñÆ‚ñÆ‚ñÆ  Battery DISCHARGE', 560, 71);
                }
                if (showPhase >= 4) {
                    ctx.fillStyle = '#4caf50';
                    ctx.fillText('‚ñÆ‚ñÆ‚ñÆ  Battery CHARGE', 560, 84);
                }
                
                // Final annotations
                if (showPhase >= 4 && endIndex === profile.length - 1) {
                    // Discharge annotation (above graph at t=6s where peak discharge occurs)
                    ctx.fillStyle = '#f44336';
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Battery', 240, 35);
                    ctx.fillText('Discharging', 240, 48);
                    
                    // Arrow down
                    ctx.strokeStyle = '#f44336';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(240, 52);
                    ctx.lineTo(240, 110);
                    ctx.stroke();
                    ctx.fillStyle = '#f44336';
                    ctx.beginPath();
                    ctx.moveTo(240, 110);
                    ctx.lineTo(235, 103);
                    ctx.lineTo(245, 103);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Charge annotation (above graph at t=16s where charging occurs)
                    ctx.fillStyle = '#4caf50';
                    ctx.font = 'bold 12px Arial';
                    ctx.fillText('Battery', 540, 35);
                    ctx.fillText('Charging', 540, 48);
                    
                    // Arrow down
                    ctx.strokeStyle = '#4caf50';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(540, 52);
                    ctx.lineTo(540, 210);
                    ctx.stroke();
                    ctx.fillStyle = '#4caf50';
                    ctx.beginPath();
                    ctx.moveTo(540, 210);
                    ctx.lineTo(535, 203);
                    ctx.lineTo(545, 203);
                    ctx.closePath();
                    ctx.fill();
                }
            }
            
            if (isAnimating) return;
            isAnimating = true;
            
            const animationInterval = setInterval(() => {
                drawProfile(currentIndex, phase);
                
                if (currentIndex < profile.length - 1) {
                    currentIndex++;
                } else {
                    if (phase < 4) {
                        phase++;
                        currentIndex = 0;
                    } else {
                        clearInterval(animationInterval);
                        isAnimating = false;
                    }
                }
            }, 300);
        }

        // Auto-draw canvases on load
        window.addEventListener('load', function() {
            setTimeout(() => {
                drawPerformanceCurve();
                drawTopology('cruise');
                drawPowerManagement();
            }, 500);
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const modules = document.querySelectorAll('.module');
            if (e.key === 'ArrowRight' && currentModule < modules.length - 1) {
                showModule(currentModule + 1);
            } else if (e.key === 'ArrowLeft' && currentModule > 0) {
                showModule(currentModule - 1);
            }
        });
    </script>
</body>
</html>